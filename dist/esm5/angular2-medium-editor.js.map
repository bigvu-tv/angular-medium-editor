{
  "version": 3,
  "file": "angular2-medium-editor.js",
  "sources": [
    "ng://angular2-medium-editor/out/medium-editor.directive.ts"
  ],
  "sourcesContent": [
    "import {\r\n    Directive,\r\n    ElementRef,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    OnDestroy,\r\n    OnInit,\r\n    Output,\r\n    Renderer,\r\n    ɵlooseIdentical\r\n} from '@angular/core';\r\nimport * as MediumEditor from 'medium-editor';\r\n\r\n/**\r\n * Medium Editor wrapper directive.\r\n *\r\n * Examples\r\n * <medium-editor\r\n      [(editorModel)]=\"textVar\"\r\n *    [editorOptions]=\"{'toolbar': {'buttons': ['bold', 'italic', 'underline', 'h1', 'h2', 'h3']}}\"\r\n *    [editorPlaceholder]=\"placeholderVar\"></medium-editor>\r\n */\r\n@Directive({\r\n  selector: 'medium-editor'\r\n})\r\nexport class MediumEditorDirective implements OnInit, OnChanges, OnDestroy {\r\n\r\n  private lastViewModel: string;\r\n  private element: HTMLElement;\r\n  private editor: any;\r\n  private active: boolean;\r\n\r\n\t@Input('editorModel') model: any;\r\n  @Input('editorOptions') options: any;\r\n  @Input('editorPlaceholder') placeholder: string;\r\n\r\n  @Output('editorModelChange') update = new EventEmitter();\r\n\r\n  constructor(private el: ElementRef) { }\r\n\r\n  ngOnInit() {\r\n    this.element = this.el.nativeElement;\r\n    this.element.innerHTML = '<div class=\"me-editable\">' + this.model + '</div>';\r\n    this.active = true;\r\n\r\n    if (this.placeholder && this.placeholder.length) {\r\n      this.options.placeholder = {\r\n        text : this.placeholder\r\n      };\r\n    }\r\n\r\n    // Global MediumEditor\r\n    this.editor = new MediumEditor('.me-editable', this.options);\r\n    this.editor.subscribe('editableInput', (event, editable) => {\r\n      this.updateModel();\r\n    });\r\n  }\r\n\r\n  refreshView() {\r\n    if (this.editor) {\r\n      this.editor.setContent(this.model);\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes): void {\r\n    if (this.isPropertyUpdated(changes, this.lastViewModel)) {\r\n      this.lastViewModel = this.model;\r\n      this.refreshView();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emit updated model\r\n   */\r\n  updateModel(): void {\r\n    let value = this.editor.getContent();\r\n    value = value.replace(/&nbsp;/g, '')\r\n                 .replace(/<p><br><\\/p>/g, '')\r\n                 .trim();\r\n    this.lastViewModel = value;\r\n    this.update.emit(value);\r\n  }\r\n\r\n  /**\r\n   * Remove MediumEditor on destruction of directive\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.editor.destroy();\r\n  }\r\n\r\n  isPropertyUpdated(changes, viewModel) {\r\n    if (!changes.hasOwnProperty('model')) { return false; }\r\n\r\n    const change = changes.model;\r\n\r\n    if (change.isFirstChange()) {\r\n      return true;\r\n    }\r\n    return !ɵlooseIdentical(viewModel, change.currentValue);\r\n  }\r\n}\r\n"
  ],
  "names": [],
  "mappings": "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"
}
