{"version":3,"file":"angular2-medium-editor.umd.js.map","sources":["ng://angular2-medium-editor/medium-editor.directive.ts","ng://angular2-medium-editor/medium-editor.module.ts"],"sourcesContent":["import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    Renderer2\n} from '@angular/core';\nimport * as MediumEditor from 'medium-editor';\n\n/**\n * Medium Editor wrapper directive.\n *\n * Examples\n * <medium-editor\n      [(editorModel)]=\"textVar\"\n *    [editorOptions]=\"{'toolbar': {'buttons': ['bold', 'italic', 'underline', 'h1', 'h2', 'h3']}}\"\n *    [editorPlaceholder]=\"placeholderVar\"></medium-editor>\n */\n@Directive({\n  selector: 'medium-editor'\n})\nexport class MediumEditorDirective implements OnInit, OnChanges, OnDestroy {\n\n  private lastViewModel: string;\n  private element: HTMLElement;\n  private editor: any;\n  private active: boolean;\n\n\t@Input('editorModel') model: any;\n  @Input('editorOptions') options: any;\n  @Input('editorPlaceholder') placeholder: string;\n\n  @Output('editorModelChange') update = new EventEmitter();\n\n  constructor(private el: ElementRef) { }\n\n  ngOnInit() {\n    this.element = this.el.nativeElement;\n    this.element.innerHTML = '<div class=\"me-editable\">' + this.model + '</div>';\n    this.active = true;\n\n    if (this.placeholder && this.placeholder.length) {\n      this.options.placeholder = {\n        text : this.placeholder\n      };\n    }\n\n    // Global MediumEditor\n    this.editor = new MediumEditor('.me-editable', this.options);\n    this.editor.subscribe('editableInput', (event, editable) => {\n      this.updateModel();\n    });\n  }\n\n  refreshView() {\n    if (this.editor) {\n      this.editor.setContent(this.model);\n    }\n  }\n\n  ngOnChanges(changes): void {\n    if (this.isPropertyUpdated(changes, this.lastViewModel)) {\n      this.lastViewModel = this.model;\n      this.refreshView();\n    }\n  }\n\n  /**\n   * Emit updated model\n   */\n  updateModel(): void {\n    let value = this.editor.getContent();\n    value = value.replace(/&nbsp;/g, '')\n                 .replace(/<p><br><\\/p>/g, '')\n                 .trim();\n    this.lastViewModel = value;\n    this.update.emit(value);\n  }\n\n  /**\n   * Remove MediumEditor on destruction of directive\n   */\n  ngOnDestroy(): void {\n    this.editor.destroy();\n  }\n\n  isPropertyUpdated(changes, viewModel) {\n    if (!changes.hasOwnProperty('model')) { return false; }\n\n    const change = changes.model;\n\n    if (change.isFirstChange()) {\n      return true;\n    }\n    return !Object.is(viewModel, change.currentValue);\n  }\n}\n","// import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core'\n\nimport { MediumEditorDirective } from './medium-editor.directive';\n\n@NgModule({\n  imports: [ ],\n  exports: [\n    MediumEditorDirective\n  ],\n  declarations: [\n    MediumEditorDirective\n  ],\n})\nexport class MediumEditorModule { }"],"names":["EventEmitter","Directive","ElementRef","Input","Output","NgModule"],"mappings":"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"}
