{"version":3,"names":["MediumEditorDirective","el","this","update","EventEmitter","prototype","ngOnInit","_this","element","nativeElement","innerHTML","model","active","placeholder","length","options","text","editor","MediumEditor","subscribe","event","editable","updateModel","refreshView","setContent","ngOnChanges","changes","isPropertyUpdated","lastViewModel","value","getContent","replace","trim","emit","ngOnDestroy","destroy","viewModel","hasOwnProperty","change","isFirstChange","Object","is","currentValue","type","Directive","args","selector","ElementRef","Input","Output","MediumEditorModule","NgModule","imports","exports","declarations"],"sources":["../../medium-editor.directive.ts","../../medium-editor.module.ts"],"sourcesContent":["import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    Renderer2\n} from '@angular/core';\nimport * as MediumEditor from 'medium-editor';\n\n/**\n * Medium Editor wrapper directive.\n *\n * Examples\n * <medium-editor\n      [(editorModel)]=\"textVar\"\n *    [editorOptions]=\"{'toolbar': {'buttons': ['bold', 'italic', 'underline', 'h1', 'h2', 'h3']}}\"\n *    [editorPlaceholder]=\"placeholderVar\"></medium-editor>\n */\n@Directive({\n  selector: 'medium-editor'\n})\nexport class MediumEditorDirective implements OnInit, OnChanges, OnDestroy {\n\n  private lastViewModel: string;\n  private element: HTMLElement;\n  private editor: any;\n  private active: boolean;\n\n\t@Input('editorModel') model: any;\n  @Input('editorOptions') options: any;\n  @Input('editorPlaceholder') placeholder: string;\n\n  @Output('editorModelChange') update = new EventEmitter();\n\n  constructor(private el: ElementRef) { }\n\n  ngOnInit() {\n    this.element = this.el.nativeElement;\n    this.element.innerHTML = '<div class=\"me-editable\">' + this.model + '</div>';\n    this.active = true;\n\n    if (this.placeholder && this.placeholder.length) {\n      this.options.placeholder = {\n        text : this.placeholder\n      };\n    }\n\n    // Global MediumEditor\n    this.editor = new MediumEditor('.me-editable', this.options);\n    this.editor.subscribe('editableInput', (event, editable) => {\n      this.updateModel();\n    });\n  }\n\n  refreshView() {\n    if (this.editor) {\n      this.editor.setContent(this.model);\n    }\n  }\n\n  ngOnChanges(changes): void {\n    if (this.isPropertyUpdated(changes, this.lastViewModel)) {\n      this.lastViewModel = this.model;\n      this.refreshView();\n    }\n  }\n\n  /**\n   * Emit updated model\n   */\n  updateModel(): void {\n    let value = this.editor.getContent();\n    value = value.replace(/&nbsp;/g, '')\n                 .replace(/<p><br><\\/p>/g, '')\n                 .trim();\n    this.lastViewModel = value;\n    this.update.emit(value);\n  }\n\n  /**\n   * Remove MediumEditor on destruction of directive\n   */\n  ngOnDestroy(): void {\n    this.editor.destroy();\n  }\n\n  isPropertyUpdated(changes, viewModel) {\n    if (!changes.hasOwnProperty('model')) { return false; }\n\n    const change = changes.model;\n\n    if (change.isFirstChange()) {\n      return true;\n    }\n    return !Object.is(viewModel, change.currentValue);\n  }\n}\n","// import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core'\n\nimport { MediumEditorDirective } from './medium-editor.directive';\n\n@NgModule({\n  imports: [ ],\n  exports: [\n    MediumEditorDirective\n  ],\n  declarations: [\n    MediumEditorDirective\n  ],\n})\nexport class MediumEditorModule { }"],"mappings":"irBAyBAA,EAAA,WAaE,SAAAA,EAAoBC,GAAAC,KAAED,GAAFA,EAFSC,KAAAC,OAAS,IAAIC,c,QAI1CJ,EAAAK,UAAAC,SAAA,eAgBCC,EAAAL,KAfCA,KAAKM,QAAUN,KAAKD,GAAGQ,cACvBP,KAAKM,QAAQE,UAAY,4BAA8BR,KAAKS,MAAQ,SACpET,KAAKU,QAAS,EAEVV,KAAKW,aAAeX,KAAKW,YAAYC,SACvCZ,KAAKa,QAAQF,YAAc,CACzBG,KAAOd,KAAKW,cAKhBX,KAAKe,OAAS,IAAIC,EAAa,eAAgBhB,KAAKa,SACpDb,KAAKe,OAAOE,UAAU,iBAAiB,SAACC,EAAOC,GAC7Cd,EAAKe,aACP,G,EAGFtB,EAAAK,UAAAkB,YAAA,WACMrB,KAAKe,QACPf,KAAKe,OAAOO,WAAWtB,KAAKS,M,EAIhCX,EAAWK,UAAAoB,YAAX,SAAYC,GACNxB,KAAKyB,kBAAkBD,EAASxB,KAAK0B,iBACvC1B,KAAK0B,cAAgB1B,KAAKS,MAC1BT,KAAKqB,c,EAOTvB,EAAAK,UAAAiB,YAAA,WACE,IAAIO,EAAQ3B,KAAKe,OAAOa,aACxBD,EAAQA,EAAME,QAAQ,UAAW,IACnBA,QAAQ,gBAAiB,IACzBC,OACd9B,KAAK0B,cAAgBC,EACrB3B,KAAKC,OAAO8B,KAAKJ,E,EAMnB7B,EAAAK,UAAA6B,YAAA,WACEhC,KAAKe,OAAOkB,S,EAGdnC,EAAAK,UAAAsB,kBAAA,SAAkBD,EAASU,GACzB,IAAKV,EAAQW,eAAe,SAAY,OAAO,EAE/C,IAAMC,EAASZ,EAAQf,MAEvB,QAAI2B,EAAOC,kBAGHC,OAAOC,GAAGL,EAAWE,EAAOI,a,IAzExC,G,cAHC,CAAAC,KAAAC,YAAUC,KAAA,EACTC,SAAU,oB,yCArBRC,c,oBA8BFpC,MAAA,EAAAgC,KAAAK,QAAKH,KAAA,CAAC,iBACL9B,QAAA,EAAA4B,KAAAK,QAAKH,KAAA,CAAC,mBACNhC,YAAA,EAAA8B,KAAAK,QAAKH,KAAA,CAAC,uBAEN1C,OAAA,EAAAwC,KAAAM,SAAMJ,KAAA,CAAC,wBCtBV,IAAAK,EAAA,W,gBATC,CAAAP,KAAAQ,WAASN,KAAA,EACRO,QAAS,GACTC,QAAS,CACPrD,GAEFsD,aAAc,CACZtD,O"}