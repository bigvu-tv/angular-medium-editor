{"version":3,"file":"angular-medium-editor.mjs","sources":["../../medium-editor.directive.ts","../../medium-editor.module.ts","../../angular-medium-editor.ts"],"sourcesContent":["import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    Renderer2\n} from '@angular/core';\nimport * as MediumEditor from 'medium-editor';\n\n/**\n * Medium Editor wrapper directive.\n *\n * Examples\n * <medium-editor\n      [(editorModel)]=\"textVar\"\n *    [editorOptions]=\"{'toolbar': {'buttons': ['bold', 'italic', 'underline', 'h1', 'h2', 'h3']}}\"\n *    [editorPlaceholder]=\"placeholderVar\"></medium-editor>\n */\n@Directive({\n  selector: 'medium-editor'\n})\nexport class MediumEditorDirective implements OnInit, OnChanges, OnDestroy {\n\n  private lastViewModel: string = '';\n  private element: HTMLElement = new HTMLElement();\n  private editor: any;\n  private active: boolean = false;\n\n  @Input('editorModel') model: any;\n  @Input('editorOptions') options: any;\n  @Input('editorPlaceholder') placeholder: string = '';\n\n  @Output('editorModelChange') update = new EventEmitter();\n\n  constructor(private el: ElementRef) { }\n\n  ngOnInit() {\n    this.element = this.el.nativeElement;\n    this.element.innerHTML = '<div class=\"me-editable\">' + this.model + '</div>';\n    this.active = true;\n\n    if (this.placeholder && this.placeholder.length) {\n      this.options.placeholder = {\n        text : this.placeholder\n      };\n    }\n\n    // Global MediumEditor\n    this.editor = new MediumEditor('.me-editable', this.options);\n    this.editor.subscribe('editableInput', (event : any, editable: any) => {\n      this.updateModel();\n    });\n  }\n\n  refreshView() {\n    if (this.editor) {\n      this.editor.setContent(this.model);\n    }\n  }\n\n  ngOnChanges(changes : any): void {\n    if (this.isPropertyUpdated(changes, this.lastViewModel)) {\n      this.lastViewModel = this.model;\n      this.refreshView();\n    }\n  }\n\n  /**\n   * Emit updated model\n   */\n  updateModel(): void {\n    let value = this.editor.getContent();\n    value = value.replace(/&nbsp;/g, '')\n                 .replace(/<p><br><\\/p>/g, '')\n                 .trim();\n    this.lastViewModel = value;\n    this.update.emit(value);\n  }\n\n  /**\n   * Remove MediumEditor on destruction of directive\n   */\n  ngOnDestroy(): void {\n    this.editor.destroy();\n  }\n\n  isPropertyUpdated(changes : any, viewModel: any) {\n    if (!changes.hasOwnProperty('model')) { return false; }\n\n    const change = changes.model;\n\n    if (change.isFirstChange()) {\n      return true;\n    }\n    return !Object.is(viewModel, change.currentValue);\n  }\n}\n","import {NgModule} from \"@angular/core\";\nimport { MediumEditorDirective } from './medium-editor.directive';\n\n\n@NgModule({\n  imports: [ ],\n  declarations: [\n    MediumEditorDirective\n  ],\n  exports: [\n    MediumEditorDirective\n  ]\n})\nexport class MediumEditorModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}